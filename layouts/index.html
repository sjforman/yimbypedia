{{ partial "head.html" . }}
{{ partial "header.html" . }}

<main class="max-w-6xl mx-auto px-4 py-8">
    <div class="text-center mb-12">
        {{ $allBills := .Site.RegularPages }}
        <a href="{{ "/bills/" | relLangURL }}" class="text-xl font-bold text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out">
            Total bills tracked: {{ len $allBills }}
        </a>
    </div>

    <div class="my-8">
        <h2 class="text-3xl font-bold mb-4 text-center">Status: Pending</h2>
        {{ $pendingPage := .Site.Taxonomies.statuses.pending }}
        <p class="text-center">
            There are <span class="font-bold">{{ len $pendingPage }}</span> bills currently pending.
            <a href="{{ "/statuses/pending/" | relLangURL }}" class="text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out">
                View all pending bills
            </a>
        </p>
    </div>

    <div class="my-8">
        <h2 class="text-3xl font-bold mb-4 text-center">States Breakdown</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {{ range $key, $value := .Site.Taxonomies.states }}
            <div class="p-4 bg-white rounded-lg shadow-md">
                <h3 class="text-2xl font-bold mb-2">
                    <a href="{{ printf "/states/%s/" $key | relLangURL }}" class="text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out">
                        {{ $key | humanize }} ({{ len $value }})
                    </a>
                </h3>
                <ul class="list-disc pl-5">
                    <li>
                        Pending: {{ len (where $value ".Params.statuses" "intersect" (slice "Pending")) }}
                    </li>
                    <li>
                        Enacted: {{ len (where $value ".Params.statuses" "intersect" (slice "Enacted")) }}
                    </li>
                    <li>
                        Failed: {{ len (where $value ".Params.statuses" "intersect" (slice "Failed")) }}
                    </li>
                </ul>
            </div>
            {{ end }}
        </div>
    </div>
</main>

{{ partial "footer.html" . }}
